--bgcolor white
--fgcolor black 
--author Łukasz Proszek 
--title ansible docker 
--date today 
--- 
--center In other words 
--boldon 
--center "How I lost most of my hair." 
--boldoff 

--newpage
--heading ansible 1.1 (apt-get install ansible)
--color red
--beginshelloutput
» ansible-playbook meetup.yml
ERROR: roles is not a legal parameter in an Ansible Playbook
--endshelloutput
--color black
---
Tough luck :(
--- 
--heading ansible 1.4.5 (pip install)
--beginshelloutput
» ansible-playbook meetup.yml
PLAY RECAP ******************************************************************** 
niemiecki                  : ok=18   changed=0    unreachable=0    failed=0
--endshelloutput

--newpage
--heading let's ansible us some docker!
--beginoutput
- apt_key: url="https://get.docker.io/gpg"

- apt_repository: repo='deb http://get.docker.io/ubuntu docker main' update_cache=yes

- apt: pkg={{item}} state=latest
  with_items: 
    - lxc-docker
    - python-pip
    - cgroup-lite
--endoutput

--newpage
--beginoutput
- name: cgroup kernel config?
  lineinfile: >
    state=present
    dest="/etc/default/grub"
    line='GRUB_CMDLINE_LINUX="$GRUB_CMDLINE_LINUX cgroup_enable=memory swapaccount=1"'
  register: grub_defaults
  tags: dependencies
--endoutput
---
if changed then restart machine, and so on

--newpage
--beginoutput
- name: docker key?
  apt_key: >
    state=present 
    url="https://get.docker.io/gpg"
  tags: packages
--endoutput
---
--beginoutput
- name: docker repo?
  apt_repository: >
    repo='deb http://get.docker.io/ubuntu docker main'
    update_cache=yes
    state=present
  tags: packages
--endoutput

--newpage
--beginoutput
- name: docker (and dependencies) instaled?
  apt: pkg={{item}} state=latest
  with_items: 
    - lxc-docker
    - python-pip
    - cgroup-lite
  notify: start docker
  tags: packages
--endoutput

--newpage
--beginoutput

--endoutput

--newpage
--beginoutput

--endoutput

--newpage
--beginoutput

--endoutput

--newpage
--beginoutput

--endoutput

--newpage
--beginoutput

--endoutput
